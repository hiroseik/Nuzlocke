<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <title>Nuzlocke Tracker</title>
  <!-- Use a local copy of the Bootswatch Cosmo theme so styling works offline -->
  <link rel="stylesheet" href="cosmo.min.css" />
  <script src="react.development.js"></script>
  <script src="react-dom.development.js"></script>
  <script src="babel.min.js"></script>
</head>
<body>
  <div class="container py-4 text-center" id="root"></div>
  <script type="text/babel">
    function App() {
      const [routes, setRoutes] = React.useState([]);
      const [options, setOptions] = React.useState([]);

      React.useEffect(() => {
        const sheetId = '16sAyuGi_9KV6Ag64vItbsz7i5jw7xgDNK3bYvHLVNaE';
        const routesUrl = `https://opensheet.elk.sh/${sheetId}/Routes`;
        fetch(routesUrl)
          .then(res => res.json())
          .then(setRoutes)
          .catch(console.error);

        const optionsUrl = `https://opensheet.elk.sh/${sheetId}/Options`;
        fetch(optionsUrl)
          .then(res => res.json())
          .then(data => setOptions(data.map(r => r.Option)))
          .catch(console.error);
      }, []);

      return (
        <div>
          <h1 className="mb-4">Nuzlocke Tracker</h1>
          {routes.map((row, idx) => (
            <div key={idx} className="mb-3">
              <div className="d-flex flex-wrap justify-content-center align-items-center gap-2">
                <label className="form-label me-2">{row.Route}</label>
                <select className="form-select w-auto">
                  {row.Pokemon.split(';').map((p, index) => (
                    <option key={index} value={p.trim()}>{p.trim()}</option>
                  ))}
                </select>
                <input type="text" className="form-control w-auto" placeholder="Nickname" />
                <select className="form-select w-auto">
                  {['Captured','Dead','Missed','Received','Shiny','Traded','Trash'].map(opt => (
                    <option key={opt} value={opt}>{opt}</option>
                  ))}
                </select>
                <select className="form-select w-auto">
                  {options.map((opt, i) => (
                    <option key={i} value={opt}>{opt}</option>
                  ))}
                </select>
                <button className="btn btn-outline-danger">Dead</button>
                <button className="btn btn-outline-warning">Evolve</button>
                <button className="btn btn-outline-success">Add to Team</button>
              </div>
            </div>
          ))}
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
